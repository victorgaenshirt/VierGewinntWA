@import de.htwg.se.VierGewinnt.model.gridComponent.GridInterface
@import de.htwg.se.VierGewinnt.model.gridComponent.gridBaseImpl.Chip
@(grid: GridInterface, state: String, player: String)

@main("Vier Gewinnt") {
    <style>
            :root {
                --black: #000000;
                --yellow: #ffff9e;
                --blue: #beeeff;
                --red: #ff7373;
                --background: #3B599C;
                --white: #FFFFFF;
            }

            body {
                background: var(--background);
                margin: 2em;
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            #title {
                font-size: 4em;
                font-family: sans-serif;
                font-weight: bold;
                color: var(--blue);
                text-align: center;
            }

            #text {
                font-size: 1.2em;
                font-family: sans-serif;
                padding: 1em;
                color: var(--blue);
                text-align: center;
            }

            #buttonContainer {
                justify-content: center;
            }

            #button {
                font-size: 1.5em;
                font-family: sans-serif;
                padding: 0.5em 1em;
                border-radius: 0.5em;
                border: 0.2em solid var(--red);
                background-color: var(--yellow);
                color: var(--black);
                cursor: pointer;
                margin: 0.5em;
            }

            #grid {
                display: flex;
                align-items: center;
            }

            .column {
                display: flex;
                flex-direction: column-reverse;
            }

            .circle {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background-color: var(--yellow);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5em;
                color: var(--black);
                margin: 5px;
                cursor: pointer;
            }

            .chip-red {
                background-color: var(--red);
            }

            .chip-yellow {
                background-color: var(--yellow);
            }

            .chip-empty {
                background-color: var(--white);
            }
    </style>
    <script>
            function playMove(column) {
                fetch("/insert/" + column, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json'
                    },
                    body: "",
                }).then(() => location.reload());
            }

            function newGame(type) {
                fetch("/newGame/" + type, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json'
                    },
                    body: "",
                }).then(() => location.reload());
            }
    </script>
    <body>
        <h1 id="title">Willkommen zu Vier Gewinnt!</h1>
        <h2 id="text">@state // @player it's your turn!</h2>
        <button id="button" onclick="newGame(0)">Spiel starten</button>
        <form method="GET" action="/gameIntro">
            <input id="button" type="submit" value="4 Gewinnt - Regeln">
        </form>

        <div id="grid">
        @for(col <- 0 until grid.size) {
            <div class="column">
            @for(row <- grid.size - 1 to 0 by -1) {
                @grid.getCell(row, col).value match {
                    case Chip.RED => {
                        <div class="circle chip-red" onclick="playMove(@col)"></div>
                    }
                    case Chip.YELLOW => {
                        <div class="circle chip-yellow" onclick="playMove(@col)"></div>
                    }
                    case _ => {
                        <div class="circle chip-empty" onclick="playMove(@col)"></div>
                    }
                }
            }
            </div>
        }
        </div>
    </body>
}