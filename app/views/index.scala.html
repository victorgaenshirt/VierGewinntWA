@import de.htwg.se.VierGewinnt.model.gridComponent.GridInterface
@import de.htwg.se.VierGewinnt.model.gridComponent.gridBaseImpl.Chip
@(grid: GridInterface, state: String, player: String)

@main("Vier Gewinnt") {
    <script>
            function playMove(column) {
                fetch("/insert/" + column, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json'
                    },
                    body: "",
                }).then(() => location.reload());
            }

            function newGame(type) {
                fetch("/newGame/" + type, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json'
                    },
                    body: "",
                }).then(() => location.reload());
            }
    </script>
    <body>
        <h1 id="title">Willkommen zu Vier Gewinnt!</h1>
        <h2 id="text">@state // @player it's your turn!</h2>
        <button id="button" onclick="newGame(0)">Spiel starten</button>
        <form method="GET" action="/gameIntro">
            <input id="button" type="submit" value="4 Gewinnt - Regeln">
        </form>

        <div id="grid">
        @for(col <- 0 until grid.size) {
            <div class="column">
            @for(row <- grid.size - 1 to 0 by -1) {
                @grid.getCell(row, col).value match {
                    case Chip.RED => {
                        <div class="circle chip-red" onclick="playMove(@col)"></div>
                    }
                    case Chip.YELLOW => {
                        <div class="circle chip-yellow" onclick="playMove(@col)"></div>
                    }
                    case _ => {
                        <div class="circle chip-empty" onclick="playMove(@col)"></div>
                    }
                }
            }
            </div>
        }
        </div>
    </body>
}