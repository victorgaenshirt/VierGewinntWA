@import de.htwg.se.VierGewinnt.model.gridComponent.GridInterface
@import de.htwg.se.VierGewinnt.model.gridComponent.gridBaseImpl.Chip
@(grid: GridInterface, state: String, player: String)

@main("Vier Gewinnt") {
    <script>

            function playMove(column) {
                fetch("/insert/" + column, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json'
                    },
                    body: "",
                }).then(() => location.reload());
            }

            function newGame(type) {
                fetch("/newGame/" + type, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json'
                    },
                    body: "",
                }).then(() => location.reload());
            }
    </script>

    <div class="container mt-5 text-center">
        <h1 class="text-center text-info">Willkommen zu <br> Vier Gewinnt!</h1>

        @if(state.contains("won")) {
            <h2 class="text-center text-success">@player you won!!</h2>
        } else {
            <h2 class="text-center">@state @player it's your turn!</h2>
        }

        <div class="row justify-content-center mt-3">
            <div class="col-md-6 text-center">
                <button class="btn btn-primary btn-lg" onclick="newGame(0)">Spiel starten</button>
            </div>
        </div>

        <div class="mt-5">
        @for(row <- 0 until grid.size) {
            <div class="row">
            @for(col <- 0 until grid.size) {
                @grid.getCell(row, col).value match {
                    case Chip.RED => {
                        <span class="col bi bi-circle-fill text-danger mb-6" style="font-size: 4em;" onclick="playMove(@col)"></span>
                    }
                    case Chip.YELLOW => {
                        <span class="col bi bi-circle-fill text-warning mb-6" style="font-size: 4em;" onclick="playMove(@col)"></span>
                    }
                    case _ => {
                        <span class="col bi bi-circle-fill text-light mb-6" style="font-size: 4em;" onclick="playMove(@col)"></span>
                    }
                }
            }
            </div>
        }
        </div>
    </div>
}